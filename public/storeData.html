<!DOCTYPE html>
<html>

<head>
  <title>Stored Form Data</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body class="d-flex justify-content-center flex-column align-items-center">
  <div class="d-flex justify-content-center flex-column">
    <button onclick="showData()" class="btn bg-primary btn-lg btn-block self-align-center">Show Details</button>
    
  </div>
  
  <div id="dataContainer" class="w-100"></div>
  <script>
    const dataContainer = document.getElementById('dataContainer');

   
    const showData = async () => {
      try {
        const response = await fetch('/getData');
        const data = await response.text();

        // Display the data in the dataContainer element
        const dataContainer = document.getElementById('dataContainer');
        
        if (dataContainer.style.display === 'none') {
          // ðŸ‘‡ï¸ this SHOWS the form
          dataContainer.style.display = 'block';
          dataContainer.innerHTML = data;
        } else {
          // ðŸ‘‡ï¸ this HIDES the form
          dataContainer.style.display = 'none';
        }
      
        
      } catch (error) {
        console.error('Failed to fetch form data:', error);
        // Handle error case here
      }
      
    };


    
    const deleteCustomer = async (id) => {
      try {
        const response = await fetch(`/deleteData/${id}`, {
          method: 'DELETE'
        });
        const result = await response.json();
        console.log(result);
        // Refresh the displayed data after deletion
        showData();
      } catch (error) {
        console.error('Failed to delete customer:', error);
        // Handle error case here
      }
    };
  </script>
</body>

</html>